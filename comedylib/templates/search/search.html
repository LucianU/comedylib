{% extends 'base.html' %}

{% block content %}
    {% if query %}
        <div class="row">
            <div class="col-xs-12">
                <h1>Results</h1>
                <h5>You searched for <span>{{ query }}</span>. </h5>
            </div>
            <div class="col-xs-12 col-sm-8">
            {% for result in page.object_list %}
                {% if result.model_name != 'collection' %}
                    <div class="row">
                        <div class="col-xs-3 search-pic-content">
                            <a href="{{ result.object.get_absolute_url }}">
                                <img src="{{ result.object.picture.url }}">
                            </a>
                            <p class="duration">{{ result.object.duration }}</p>
                        </div>
                        <div class="col-xs-9 search-info-content">
                            <a class="title" href="{{ result.object.get_absolute_url }}">{{ result.object.title }}</a>
                            <a class="title-collection" href="{{ result.object.collection.get_absolute_url }}">{{ result.object.collection.name }}</a>
                            <p>{{ result.object.views }}</p><span>Views</span>
                            <p>{{ result.object.rating }} %</p><span>Rating</span>    
                        </div>
                    </div>
                {% endif %}
            {% empty %}
                <p>No results found.</p>
                {% if suggestion %}
                    <p>Did you mean <a href="{% url haystack_search %}?q={{ suggestion }}">{{ suggestion }}</a>?</p>
                {% endif %}
            {% endfor %}
            </div>
            <div class="col-xs-12 col-sm-4">
                <div class="row">
            {% for result in page.object_list %}
                {% if result.model_name == 'collection' %}
                    <div class="col-xs-12 search-collection">
                        <a class="name" href="{{ result.object.get_absolute_url }}">{{ result.object.name }}</a>
                        <p class="role">{{ result.object.get_role_display|title }}</p>
                        {% load thumbnail %}
                        <a href="{{ result.object.get_absolute_url }}">
                            <img src="{% thumbnail result.object.picture 315x150 crop %}">
                        </a>
                    </div>
                {% endif %}
            {% endfor %}
                </div>
            </div>
             <div class="col-xs-12 pagination text-center">
                {% include "pagination.html" %}
            </div>
        </div>
       
    {% else %}
        <p>Insert the terms into the search field.</p>
    {% endif %}
{% endblock %}
