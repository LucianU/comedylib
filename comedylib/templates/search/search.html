{% extends 'base.html' %}
{% load thumbnail %}
{% block content %}
    {% if query %}
        <div class="row">
            <div class="col-xs-12">
                <h1>Results</h1>
                <h5>You searched for <span>{{ query }}</span>. </h5>
                <p></p>
            </div>
            <div class="col-xs-12 col-sm-8">
                <div class="row">
                {% for result in page.object_list %}
                    {% if result.model_name = 'playlist' %}
                        <div class="playlist-content">
                            {% with playlist=result.object videos=result.object.videos.playlist_order %}
                                {% include 'profiles/partials/playlist.html' %}
                            {% endwith %}
                        </div>
                    {% else %}
                        {% if result.model_name = 'video' %}
                            {% with video=result.object %}
                                <div class="col-xs-12 search-content">
                                    <div class="col-xs-3 search-pic-content">
                                        <a href="{{ video.get_absolute_url }}">
                                            <img src="{{ video.picture.url }}">
                                        </a>
                                        <p class="duration">{{ video.duration }}</p>
                                    </div>
                                    <div class="col-xs-9 search-info-content">
                                        <a class="title" href="{{ video.get_absolute_url }}">{{ video.title }}</a>
                                        <a class="title-collection" href="{{ video.collection.get_absolute_url }}">{{ video.collection.name }}</a>
                                        <p>{{ video.views }}</p><span>Views</span>
                                        <p>{{ video.rating }} %</p><span>Rating</span>
                                    </div>
                                </div>
                            {% endwith %}
                        {% endif %}
                    {% endif %}
                {% empty %}
                    <div class="col-xs-12">
                    <p>No results found.</p>
                    {% if suggestion %}
                        <p>Did you mean <a href="{% url haystack_search %}?q={{ suggestion }}">{{ suggestion }}</a>?</p>
                    {% endif %}
                    </div>
                {% endfor %}
                 </div>
            </div>
            <div class="col-xs-12 col-sm-4">
                <div class="row">
            {% for result in page.object_list %}
                {% if result.model_name == 'collection' %}
                    <div class="col-xs-12 search-collection">
                        <a class="name" href="{{ result.object.get_absolute_url }}">{{ result.object.name }}</a>
                        <p class="role">{{ result.object.get_role_display|title }}</p>
                        <a href="{{ result.object.get_absolute_url }}">
                            <img src="{% thumbnail result.object.picture 315x150 crop %}">
                        </a>
                    </div>
                {% endif %}
            {% endfor %}
                </div>
            </div>
            <div class="col-xs-12 album-pagination">
                {% include "pagination.html" %}
            </div>
        </div>
    {% else %}
        <p>Insert the terms into the search field.</p>
    {% endif %}
{% endblock %}
