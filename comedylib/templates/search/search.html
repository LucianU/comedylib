{% extends 'base.html' %}
{% load thumbnail %}
{% block content %}
    {% if query %}
        <div class="row">
            <div class="col-xs-12">
                <h1>Results</h1>
                <h5>You searched for <span>{{ query }}</span>. </h5>
                <p></p>
            </div>
            <div class="col-xs-12 col-sm-8">
                <div class="row">
                {% for result in page.object_list %}
                    {% if result.model_name = 'playlist' %}
                            <div class="playlist-content">
                                <div class="play-pic-content">
                                    <a class="text-center playallmain" href="{{ result.object.0.get_absolute_url }}?pl={{ playlist.id }}"><span class="glyphicon glyphicon-play"></span> Play all</a>
                                    {% if videos.0 %}<img src="{% thumbnail result.object.0.picture 144x110 crop %}" alt="First playlist image"/>{% endif %}
                                    <div class="sidebar">
                                        <p class="text-center">{{ playlist.result.object.count }}<br/>Videos</p>
                                        {% if videos.1 %}<img src="{% thumbnail result.object.1.picture 42x31 crop %}" class="mini" alt="Second playlist image"/>{% endif %}
                                        {% if videos.2 %}<img src="{% thumbnail result.object.2.picture 42x31 crop %}" class="mini" alt="Third playlist image"/>{% endif %}
                                    </div>
                                </div>
                                <div class="play-name-content">
                                    <a href="{{ result.object.0.get_absolute_url }}?pl={{ playlist.id }}" title="{{ playlist.title }}">{{ playlist.title|truncatechars:30 }}</a>
                                </div>
                                <div class="play-detail-content">
                                    <div class="row text-center">
                                        <div class="col-xs-6">
                                            <span>Bookmarks</span> <p>{{ playlist.bookmarks_count }}</p>
                                        </div>
                                        <div class="col-xs-6">
                                            <span class="user-header">User</span><a href="{{playlist.profile.get_absolute_url}}">{{ playlist.profile.user.username }}</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                    {% else %}
                        {% if result.model_name = 'video' %}
                            <div class="col-xs-12 search-content">
                                <div class="col-xs-3 search-pic-content">
                                    <a href="{{ result.object.get_absolute_url }}">
                                        <img src="{{ result.object.picture.url }}">
                                    </a>
                                    <p class="duration">{{ result.object.duration }}</p>
                                </div>
                                <div class="col-xs-9 search-info-content">
                                    <a class="title" href="{{ result.object.get_absolute_url }}">{{ result.object.title }}</a>
                                    <a class="title-collection" href="{{ result.object.collection.get_absolute_url }}">{{ result.object.collection.name }}</a>
                                    <p>{{ result.object.views }}</p><span>Views</span>
                                    <p>{{ result.object.rating }} %</p><span>Rating</span>
                                </div>
                            </div>
                        {% endif %}
                    {% endif %}
                {% empty %}
                    <div class="col-xs-12">
                    <p>No results found.</p>
                    {% if suggestion %}
                        <p>Did you mean <a href="{% url haystack_search %}?q={{ suggestion }}">{{ suggestion }}</a>?</p>
                    {% endif %}
                    </div>
                {% endfor %}
                 </div>
            </div>
            <div class="col-xs-12 col-sm-4">
                <div class="row">
            {% for result in page.object_list %}
                {% if result.model_name == 'collection' %}
                    <div class="col-xs-12 search-collection">
                        <a class="name" href="{{ result.object.get_absolute_url }}">{{ result.object.name }}</a>
                        <p class="role">{{ result.object.get_role_display|title }}</p>
                        <a href="{{ result.object.get_absolute_url }}">
                            <img src="{% thumbnail result.object.picture 315x150 crop %}">
                        </a>
                    </div>
                {% endif %}
            {% endfor %}
                </div>
            </div>
            <div class="col-xs-12 album-pagination">
                {% include "pagination.html" %}
            </div>
        </div>
    {% else %}
        <p>Insert the terms into the search field.</p>
    {% endif %}
{% endblock %}
